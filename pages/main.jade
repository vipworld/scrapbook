html
  head
    link(href="../css/scrapboot.css", rel="stylesheet")
    script(type="text/javascript", src="../jquery-1.9.1.min.js")
    script(type="text/javascript", src="../mochiscript.js")
  body
    .scrapbook
      a.close.icon-white &times;
      .panel.rulesets
        h1 Existing Rulesets
        ul.ruleset-list
          li replace me with rule name
        button.btn.newRule New Rule
        form.ruleset-define-form(style="display: none;")
          input(type="text", name="name", placeholder="name")
          input(type="text", name="table", placeholder="factual table id (optional)")
          button.btn.addRule Add Rule
        a.next Next

      .panel.rule.panel-out
        h1 Rules/Extractions
    script(type="text/javascript")
      $(function() {
        var $root       = $('.scrapbook:first');
        var $newRule    = $root.find('.newRule:first');
        var $addRule    = $root.find('.addRule:first');
        var $ruleForm   = $root.find('.ruleset-define-form:first');
        var $ruleList   = $root.find('.ruleset-list:first');
        var $rulesPanel = $root.find('.rulesets:first');
        var $rulePanel  = $root.find('.rule:first');
        var $toRule     = $root.find('.next');

        function rulePanel(rule) {
          $rulePanel.removeClass('panel-out')
            .addClass('panel-in');
        }

        function rulesPanel() {
          $rulePanel.removeClass('panel-in')
            .addClass('panel-out');
        }

        function setPanelHeight() {
          $root.height($(document).height());
        }

        function clearForm() {
        }
        function saveRule(vals) {
          var html = '';
          html += '<li>'
            + vals[0].value
            + '</li>';
          $ruleList.html(html);
        }

        $newRule.click(function() {
          $newRule.hide();
          $('.ruleset-define-form:first').show();
        });

        $addRule.click(function(e) {
          e.preventDefault();
          var form = $(e.target).parents('form');
          var vals = form.serializeArray();
          saveRule(vals);
          clearForm();

          $newRule.show();
          $ruleForm.fadeOut();
          $ruleList.append();
        });

        $toRule.click(function() {
          rulePanel();
        });

        $(window).resize(function() {
          setPanelHeight();
        });

        setPanelHeight();

      });
      
